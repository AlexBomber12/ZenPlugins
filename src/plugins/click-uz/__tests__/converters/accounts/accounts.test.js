import { convertAccounts } from '../../../converters'

describe('convertAccount', () => {
  it.each([
    [
      [
        {
          id: 12000956,
          accno: '8600 02 ** **** 0725',
          description: 'Карта UZCARD-Online',
          branch: '00000',
          bank_name: 'Узнацбанк',
          currency: '000',
          currency_code: 'UZS',
          currency_name: 'сум ',
          acc_abs: 'SMARTV ',
          access: 2,
          card_num: '8600 02 ** **** 0725',
          expire_date: '1124',
          short_name: 'NBU',
          card_num_crypted: 'dNcXNvF332B239hPU7L+XK2bb15YFlmBf9P1tqgiHbPbB6urEB4+4A99/Df93/3fEiNtBBBQUWotEiK7/brwbfgy4Ub3OKPyUEJU4BuC3ZDPS2f3zxFxNJfhXCKG5AqT8SSZmYWubXQ/UTYopXQPN7W6xb9jDHyfnaqHjdykbGo=',
          card_num_hash: '9A32C95DA2EC505D4B7EA92989776D118B68455C8A78D6AD740D8A311B7D4C7B|9711E0E6F6A8F4B4E0530100007F3A67',
          is_uzcard: 1,
          removable: 1,
          background_color_top: '106,84,159',
          background_color_bottom: '177,149,251',
          font_color: '255,255,255',
          card_background_url: 'https://cdn.click.uz/app/rev2/card/uzcard/nbu.png',
          image_url: 'https://cdn.click.uz/app/rev2/bank/nbu.png',
          payment_allowed: 1,
          p2p_allowed: 1,
          monitoring_token: '',
          card_status: 1,
          card_status_text: 'Активна',
          card2wallet: 1,
          wallet2card: true,
          wallet2wallet: true,
          checksum: 1251241451
        },
        {
          id: 13988320,
          accno: '8801504201237823',
          description: 'Виртуальный счет',
          branch: '00000',
          bank_name: 'CLICK',
          currency: '000',
          currency_code: 'UZS',
          currency_name: 'сум ',
          acc_abs: 'WALLET ',
          access: 2,
          card_num: '8801504201237823',
          expire_date: null,
          short_name: 'CLICK',
          card_num_crypted: 'bd5PHKohgI9I0mNtYypFk5+KNexxfitC1OgXusZuQchyyWpt7wvfEB9LCHNScF8LjUzwqcnOWQb8+GxhF9D8+08VSMBJJdwDYFuBJUPXyJe097UWDzVBoWu4Dm4X6WTBF4teLwma7pZPZOyyZtfN/vSxCdFGHp85PV5DfQb3afw=',
          card_num_hash: '7F6633EB3A41B5D194A17ACCC41FB3083E23D76F060B029F0BAC48140AF33E46|',
          is_uzcard: 0,
          removable: 0,
          background_color_top: '192,62,108',
          background_color_bottom: '255,141,101',
          font_color: '45,45,45',
          card_background_url: 'https://cdn.click.uz/app/rev2/card/wallet/light.png',
          image_url: 'https://cdn.click.uz/app/rev2/bank/wallet.png',
          payment_allowed: 0,
          p2p_allowed: 0,
          monitoring_token: '',
          card_status: 0,
          card_status_text: 'Не активна',
          card2wallet: 0,
          wallet2card: true,
          wallet2wallet: true,
          checksum: -1355966782,
          balance: 10905
        },
        {
          id: 15777643,
          accno: '8801408204063029',
          description: 'CLICK-кошелёк Light',
          branch: '00000',
          bank_name: 'CLICK',
          currency: '000',
          currency_code: 'UZS',
          currency_name: 'сум ',
          acc_abs: 'WALLET ',
          access: 2,
          card_num: '8801408204063029',
          expire_date: null,
          short_name: 'CLICK',
          card_num_crypted: 'Te0Q4Z8t8ROvzTQ7d1s/wfiLUgAOPxazsP/vdjsEMFljuo+BptCFVnCM7DQxh1+1PjhHkn4Ugkfupl6276uS4zRarXRhIstA7Fy/omSljIy6hz/NrBjQNZN246iUFhve5GaGOcG27rP8iPqXYsuO8XG9IYQS6QJ4CgRgSTQNKbo=',
          card_num_hash: '8D9D761A3B3FEF0B22A5BB2A33A57B69123C18F93FF28DA5F2B551FFD1CAC814|',
          is_uzcard: 0,
          removable: 0,
          background_color_top: '192,62,108',
          background_color_bottom: '255,141,101',
          font_color: '45,45,45',
          card_background_url: 'https://cdn.click.uz/app/rev2/card/wallet/light.png',
          image_url: 'https://cdn.click.uz/app/rev2/bank/wallet.png',
          payment_allowed: 0,
          p2p_allowed: 0,
          monitoring_token: '',
          card_status: 0,
          card_status_text: 'Не активна',
          card2wallet: 0,
          wallet2card: true,
          wallet2wallet: true,
          checksum: -496207544
        }
      ],
      [
        {
          account_id: 12000956,
          balance: 283.84,
          error: 0
        },
        {
          account_id: 13988320,
          balance: 10905,
          error: 0
        },
        {
          account_id: 15777643,
          balance: 0,
          error: 0
        }
      ],
      [
        {
          id: '12000956',
          type: 'ccard',
          title: 'Карта UZCARD-Online',
          instrument: 'UZS',
          syncIds: [
            '860002******0725'
          ],
          balance: 283.84
        },
        {
          id: '13988320',
          type: 'checking',
          title: 'Виртуальный счет',
          instrument: 'UZS',
          syncIds: [
            '880150******7823'
          ],
          balance: 10905
        },
        {
          id: '15777643',
          type: 'checking',
          title: 'CLICK-кошелёк Light',
          instrument: 'UZS',
          syncIds: [
            '880140******3029'
          ],
          balance: 0
        }
      ]
    ],
    [
      [
        {
          id: 14049009,
          accno: '8801904201398847',
          description: 'Кошелек',
          branch: '00000',
          bank_name: 'CLICK',
          currency: '000',
          currency_code: 'UZS',
          currency_name: 'сум ',
          acc_abs: 'WALLET ',
          access: 2,
          card_num: '8801904201398847',
          expire_date: null,
          short_name: 'CLICK',
          card_num_crypted: 'uQ/qRvnFdho2Tcz52LMtdOxttZT2FfDOX8EOc6HT/n0/xjm4gksXy1no+J1Ndh9ZUNsGKuvbLkp5QJ33aYlVpZ9BWr71ynJfdpzLBQFWBKVIGBNa+hqoJ4jKx904EyL/Ozzf1ECrs7+9GoxCbOlYHH4ggZLrvwRBquKqy4lmnJs=',
          card_num_hash: '1C56B8A4DBA6D33A857C094E439EE37020E724EF3B9362692AFA446219933515|',
          is_uzcard: 0,
          removable: 0,
          background_color_top: '192,62,108',
          background_color_bottom: '255,141,101',
          font_color: '45,45,45',
          card_background_url: 'https://cdn.click.uz/app/rev2/card/wallet/light.png',
          image_url: 'https://cdn.click.uz/app/rev2/bank/wallet.png',
          payment_allowed: 0,
          p2p_allowed: 0,
          monitoring_token: '',
          card_status: 1,
          card_status_text: 'Активна',
          card2wallet: 0,
          wallet2card: true,
          wallet2wallet: true,
          checksum: -1061521407
        },
        {
          id: 20546213,
          accno: '4187 80 ** **** 3630',
          description: 'VISA-карта',
          branch: '00000',
          bank_name: 'Агробанк',
          currency: '840',
          currency_code: 'USD',
          currency_name: 'доллаp сша ',
          acc_abs: 'AGRVISAUSD',
          access: 2,
          card_num: '4187 80 ** **** 3630',
          expire_date: '0723',
          short_name: 'AGRO',
          card_num_crypted: 'gWf96s2ByT5gCPgN9fJDS9bm1nyN0eRqrKJxF/3kR3R8iMT2uBBI8f2XLguOijANrfR9MAnQterJfQOS+ttSf58a7vq73njRCgEDqEXh4DkSsrWC/Uv4U1118+MqXnrO/K11XFZX7nfjzMQTn/tqwsVEV466oMQQWWM8PVjfAic=',
          card_num_hash: '4DCE3CEA64558BE7853580AC612B48D92DB0FF0F136ACF7B5CE22B5A3E5E8C3D|418780ZKKYVH3630',
          is_uzcard: 0,
          removable: 0,
          background_color_top: '192,62,108',
          background_color_bottom: '255,141,101',
          font_color: '255,255,255',
          card_background_url: null,
          image_url: 'https://cdn.click.uz/app/rev2/bank/agro.png',
          payment_allowed: null,
          p2p_allowed: null,
          monitoring_token: '',
          card_status: 1,
          card_status_text: 'Активна',
          card2wallet: 0,
          wallet2card: true,
          wallet2wallet: true,
          checksum: -970236601
        },
        {
          id: 15133511,
          accno: '8600 49 ** **** 0108',
          description: 'UzCard Индивидуальная',
          branch: '00000',
          bank_name: 'Капитал Банк',
          currency: '000',
          currency_code: 'UZS',
          currency_name: 'сум ',
          acc_abs: 'SMARTV ',
          access: 2,
          card_num: '8600 49 ** **** 0108',
          expire_date: '0425',
          short_name: 'KPTL',
          card_num_crypted: 'aLC8gQ0tkN733F5ApUbRrCT16NpaKhWYkNyG6kkoWNZlp4mtEzDXyNGYWJh7bw6IcCWzGEv+VLBLFhSv223zOfRByoqacwbLA7sLJ0iJfIIC8+n2gyhUHnbbmfuGVcUb5IU4c9DfODqwYlwAcbM/1eIu7yZ0vHe0cWmDJvt2P+4=',
          card_num_hash: '455FC3BA6A6444C471BEF81B147F9BA9A1BB817720717DD6701A7BBC46380309|A8C3DCCA215F68B3E0530100007FFB76',
          is_uzcard: 1,
          removable: 1,
          background_color_top: '85,102,120',
          background_color_bottom: '128,154,169',
          font_color: '45,45,45',
          card_background_url: 'https://cdn.click.uz/app/rev2/card/uzcard/kapital.png',
          image_url: 'https://cdn.click.uz/app/rev2/bank/kptl.png',
          payment_allowed: 1,
          p2p_allowed: 1,
          monitoring_token: '',
          card_status: 1,
          card_status_text: 'Активна',
          card2wallet: 1,
          wallet2card: true,
          wallet2wallet: true,
          checksum: -1720810814
        },
        {
          id: 20546217,
          accno: '4187 80 ** **** 2790',
          description: 'VISA-карта',
          branch: '00000',
          bank_name: 'Агробанк',
          currency: '000',
          currency_code: 'UZS',
          currency_name: 'сум ',
          acc_abs: 'AGRVISASUM',
          access: 2,
          card_num: '4187 80 ** **** 2790',
          expire_date: '0723',
          short_name: 'AGRO',
          card_num_crypted: 'w6ZFbbDaHZWTGN5IlWBVRDoAXYWWj+IWX8uFBT0VL99e3Vz/HMb8l2/Vr5yNRHysVxZXbEzOCk/Iz6yYHgP0/KV9umPrmmvaTQBGX4y9AWboWKyFyviIJSBO2nBkAdbTetLtGApgoABFz9aGky2ZS7IPQhOayfAsypExbgLpFvA=',
          card_num_hash: 'ADE9AE1F05FD8117EC5ECDF6CCE1507EA3F4DBC7C26504FD1DE5735596DCF360|418780RZDTXG2790',
          is_uzcard: 0,
          removable: 0,
          background_color_top: '192,62,108',
          background_color_bottom: '255,141,101',
          font_color: '255,255,255',
          card_background_url: null,
          image_url: 'https://cdn.click.uz/app/rev2/bank/agro.png',
          payment_allowed: null,
          p2p_allowed: null,
          monitoring_token: '',
          card_status: 1,
          card_status_text: 'Активна',
          card2wallet: 0,
          wallet2card: true,
          wallet2wallet: true,
          checksum: 1971645437
        }
      ],
      [
        { account_id: 14049009, balance: 6439.314, error: 0 },
        { account_id: 20546213, balance: null, error: -1 },
        { account_id: 15133511, balance: 128888.55, error: 0 },
        { account_id: 20546217, balance: null, error: -1 }
      ],
      [
        {
          id: '14049009',
          title: 'Кошелек',
          syncIds: ['880190******8847'],
          instrument: 'UZS',
          type: 'checking',
          balance: 6439.314
        },
        {
          id: '20546213',
          title: 'VISA-карта',
          syncIds: ['418780******3630'],
          instrument: 'USD',
          type: 'ccard',
          balance: null
        },
        {
          id: '15133511',
          title: 'UzCard Индивидуальная',
          syncIds: ['860049******0108'],
          instrument: 'UZS',
          type: 'ccard',
          balance: 128888.55
        },
        {
          id: '20546217',
          title: 'VISA-карта',
          syncIds: ['418780******2790'],
          instrument: 'UZS',
          type: 'ccard',
          balance: null
        }
      ]
    ]
  ])('converts broker accounts', (apiAccounts, apiBalances, accounts) => {
    expect(convertAccounts(apiAccounts, apiBalances)).toEqual(accounts)
  })
})
